{%load static%}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sports Meet</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'assets/css/style.css' %}"/>
    <!-- Swiper.js CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    
    <!-- AOS CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" />
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Alfa+Slab+One&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

</head>
<body>
     <!-- Navbar -->
     <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <a class="navbar-brand meet" href="{% url 'SportMeetApp:home'%}">Sports Meet</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <div class="d-flex justify-content-between w-100">
                    <div class="d-flex justify-content-center flex-grow-1">
                       
                    </div>
                </div>
            </div>
        </div>
    </nav>
    
    
<div class="container-fluid mt-5 mb-2"> 
    <div class="row g-2">
        {% for venue in results %}
            <div class="col-md-3 shadow1 border-0 p-3">
                <a href="{% url 'SportMeetApp:venue-detail' venue.id %}" style="text-decoration: none; color: inherit;">
                <!-- Main Venue Image (First Image) -->
               
                    <img src="{{venue.image}}" class="card-img-top" alt="{{ venue.name }}">
    
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <!-- Venue Name -->
                        <div class="card-name">
                            <h5>{{ venue.name }}</h5>
                        </div>
    
                        <!-- Rating -->
                        <div class="rating">
                            <strong>4.5</strong> <i class="bi bi-star-fill text-warning"></i>
                        </div>
                    </div>
    
                    <!-- Address and Image Gallery -->
                    <div class="d-flex justify-content-between mt-3">
                        <!-- Address -->
                        <div class="address" style="max-width: 150px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                            {{ venue.address }}
                        </div>

                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
    
</div>
    
   
   
 <!-- Footer Section -->
<div class="footer">
    <div class="container-fluid">
        <div class="row">
            <!-- Contact Us Section -->
            <div class="col-md-3">
                <h5>Contact Us</h5>
                <div class="footer-links">
                    <a href="#">Email Us</a>
                    <a href="#">FAQ</a>
                    <a href="#">Support</a>
                    <a href="#">Terms & Conditions</a>
                </div>
            </div>

            <!-- Quick Links Section -->
            <div class="col-md-3">
                <h5>Quick Links</h5>
                <div class="footer-links">
                    <a href="#">Venues</a>
                    <a href="#">Sports</a>
                    <!-- <a href="#">Privacy Policy</a> -->
                </div>
            </div>

              <!-- Follow Us Section -->
              <div class="col-md-3">
                <h5>Follow Us</h5>
                <div class="footer-icons">
                    <a href="#" class="facebook"><i class="fab fa-facebook"></i></a>
                    <a href="#" class="twitter"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="instagram"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="linkedin"><i class="fab fa-linkedin"></i></a>
                </div>
            </div>

            <!-- Newsletter Section -->
            <div class="col-md-3">
                <h5>Newsletter</h5>
                <div class="newsletter">
                    <div class="input-group">
                        <input type="email" class="form-control" placeholder="Enter your email" aria-label="Email Address">
                        <button class="btn btn-primary">Subscribe</button>
                    </div>
                </div>
            </div>
        </div>
        <hr class="border-white">
        <div class="row">
            <div class="col-12 text-center">
                <p>&copy; 2025 Sports Meet. All rights reserved.</p>
            </div>
        </div>
    </div>
</div>
    
    <!-- Bootstrap JS -->

<!-- Bootstrap JS and FontAwesome for Icons -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script> -->
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>


<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Slice Address Text
        let addressDiv = document.getElementById("addressDiv");
        let fullAddress = addressDiv.innerText;
        if (fullAddress.length > 30) {
            addressDiv.innerText = fullAddress.slice(0, 30) + "...";
        }

        // Handle Additional Images
        let images = document.querySelectorAll(".extra-image");
        let hiddenImages = document.querySelectorAll(".extra-image.hidden");
        let moreImagesDiv = document.querySelector(".more-images");
        let extraCountSpan = document.getElementById("extraCount");

        // Show "+X more images" if there are more than 2 images
        if (hiddenImages.length > 0) {
            moreImagesDiv.style.display = "block";
            extraCountSpan.innerText = hiddenImages.length;
        }
    });

    function openSlider() {
    // Show all hidden images
    let hiddenImages = document.querySelectorAll(".extra-image.hidden");
    hiddenImages.forEach(image => {
        image.style.display = "block";
    });

    // Show modal with carousel
    let modal = document.getElementById("imageModal");
    let sliderWrapper = document.getElementById("imageSlider");
    sliderWrapper.innerHTML = ""; // Clear previous images

    // Add all images to the modal slider
    document.querySelectorAll(".extra-image").forEach(img => {
        let slide = document.createElement("div");
        slide.classList.add("swiper-slide");
        let imgElement = document.createElement("img");
        imgElement.src = img.src;
        imgElement.classList.add("img-fluid");
        slide.appendChild(imgElement);
        sliderWrapper.appendChild(slide);
    });

    modal.style.display = "block";

    new Swiper(".mySwiperModal", {
        slidesPerView: 1,
        navigation: { nextEl: ".swiper-button-next", prevEl: ".swiper-button-prev" },
    });
}

function closeSlider() {
    // Hide the modal
    document.getElementById("imageModal").style.display = "none";
    
    // Reset visibility of images (show only the first two)
    let allImages = document.querySelectorAll(".extra-image");
    allImages.forEach((image, index) => {
        if (index >= 2) {
            image.style.display = "none";  // Hide images after the first two
        }
    });

    // Make sure the "More Images" link is displayed again
    let moreImagesDiv = document.querySelector(".more-images");
    moreImagesDiv.style.display = "block";
}
</script>
<!-- serachfunctionality -->
<script>
    document.getElementById("searchForm").addEventListener("submit", function (event) {
        event.preventDefault(); // Prevent page reload
    
        const city = document.getElementById("cityInput").value.trim();
        const area = document.getElementById("areaInput").value.trim();
        const address = document.getElementById("addressInput").value.trim();
        const sport = document.getElementById("sportInput").value.trim();
        const date = document.getElementById("dateInput").value;
    
        // Check location fields count
        const locationFields = [city, area, address].filter(val => val !== "");
        if (locationFields.length === 0) {
            alert("Please enter City, Area, or Address.");
            return;
        }
        if (locationFields.length > 1) {
            alert("Please enter only ONE location: City, Area, or Address.");
            return;
        }
    
        if (sport === "Select Sport" || !date) {
            alert("Please select a sport and date.");
            return;
        }
    
        // Build search URL with only the filled location field
        let locationParam = "";
        if (city) {
            locationParam = `&city=${encodeURIComponent(city)}`;
        } else if (area) {
            locationParam = `&area=${encodeURIComponent(area)}`;
        } else if (address) {
            locationParam = `&address=${encodeURIComponent(address)}`;
        }
    
        const searchUrl = `/search-results/?sporttype=${encodeURIComponent(sport)}&date=${encodeURIComponent(date)}${locationParam}`;
        console.log("Search URL:", searchUrl);
    
        // Redirect to search results page
        window.location.href = searchUrl;
    });
    
</script>
    <!--Start of Tawk.to Script-->
<script type="text/javascript">
    var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
    (function(){
    var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
    s1.async=true;
    s1.src='https://embed.tawk.to/67c933d77390f819097769b7/1ilkv50h5';
    s1.charset='UTF-8';
    s1.setAttribute('crossorigin','*');
    s0.parentNode.insertBefore(s1,s0);
    })();
    </script>
    <!--End of Tawk.to Script-->
    <!-- AOS JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script>AOS.init();</script>
</body>
</html>
